<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Building Web Components using Svelte</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/56d37767668435da51f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/56d37767668435da51f5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-a55f9a4b8ad6c211b679.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.0a9f20eff0752717cd72.js" as="script"/><link rel="preload" href="/_next/static/chunks/78e521c3.aa763ef5214bc6103da0.js" as="script"/><link rel="preload" href="/_next/static/chunks/de71a805.e58f4bc780d8bb7b43f3.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.128df154cba87bfd8f15.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-568144d94c49e505bac9.js" as="script"/><link rel="preload" href="/_next/static/chunks/95b64a6e.f00b9c24f94837e27d6c.js" as="script"/><link rel="preload" href="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.0133c3077496832caa33.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-74ce1f975269ad7f0e78.js" as="script"/></head><body><div id="__next"><div class="mx-auto max-w-4xl px-8"><div class="flex justify-center items-center absolute top-6 right-6"><span class=""><svg class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span><div class="w-14 h-7 flex items-center bg-gray-300 rounded-full mx-3 px-1 cursor-pointer transition-color false"><div class="bg-white w-5 h-5 rounded-full shadow-md transform transition-transform false"></div></div><span class=""><svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg></span></div><div class="flex flex-col sm:flex-row mt-12 mb-0 sm:mb-6 space-x-6 items-center border-gray-200 dark:border-gray-700 pb-6"><img src="/pic.jpeg" alt="Image of Kasper" class="rounded shadow h-32"/><div class="space-y-3 m-4 sm:m-0"><a href="/"><h1 class="text-4xl font-black items-stretch text-gray-900 dark:text-gray-100">Hi! I&#x27;m Kasper Laursen 👋</h1></a><p>On this site I posts about whatever interests me.</p><div class="flex space-x-4 text-3xl justify-center sm:justify-start"><a href="https://github.com/kasperlaursen"><div class="rounded-full p-2 bg-white dark:bg-gray-700 opacity-90 hover:bg-green-500 dark:hover:bg-green-500 hover:text-white shadow-sm hover:shadow-md transition-all duration-300"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path fill-rule="nonzero" d="M5.883 18.653c-.3-.2-.558-.455-.86-.816a50.32 50.32 0 0 1-.466-.579c-.463-.575-.755-.84-1.057-.949a1 1 0 0 1 .676-1.883c.752.27 1.261.735 1.947 1.588-.094-.117.34.427.433.539.19.227.33.365.44.438.204.137.587.196 1.15.14.023-.382.094-.753.202-1.095C5.38 15.31 3.7 13.396 3.7 9.64c0-1.24.37-2.356 1.058-3.292-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.582c.081-.024.127-.035.208-.047.803-.123 1.937.17 3.415 1.096A11.731 11.731 0 0 1 12 3.315c.912 0 1.818.104 2.684.308 1.477-.933 2.613-1.226 3.422-1.096.085.013.157.03.218.05a1 1 0 0 1 .616.58c.487 1.216.52 2.297.302 3.19.691.936 1.058 2.045 1.058 3.293 0 3.757-1.674 5.665-4.642 6.392.125.415.19.879.19 1.38a300.492 300.492 0 0 1-.012 2.716 1 1 0 0 1-.019 1.958c-1.139.228-1.983-.532-1.983-1.525l.002-.446.005-.705c.005-.708.007-1.338.007-1.998 0-.697-.183-1.152-.425-1.36-.661-.57-.326-1.655.54-1.752 2.967-.333 4.337-1.482 4.337-4.66 0-.955-.312-1.744-.913-2.404a1 1 0 0 1-.19-1.045c.166-.414.237-.957.096-1.614l-.01.003c-.491.139-1.11.44-1.858.949a1 1 0 0 1-.833.135A9.626 9.626 0 0 0 12 5.315c-.89 0-1.772.119-2.592.35a1 1 0 0 1-.83-.134c-.752-.507-1.374-.807-1.868-.947-.144.653-.073 1.194.092 1.607a1 1 0 0 1-.189 1.045C6.016 7.89 5.7 8.694 5.7 9.64c0 3.172 1.371 4.328 4.322 4.66.865.097 1.201 1.177.544 1.748-.192.168-.429.732-.429 1.364v3.15c0 .986-.835 1.725-1.96 1.528a1 1 0 0 1-.04-1.962v-.99c-.91.061-1.662-.088-2.254-.485z"></path></g></svg></div></a><a href="https://www.linkedin.com/in/habber/"><div class="rounded-full p-2 bg-white dark:bg-gray-700 opacity-90 hover:bg-green-500 dark:hover:bg-green-500 hover:text-white shadow-sm hover:shadow-md transition-all duration-300"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.2" baseProfile="tiny" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 19h-3v-10h3v10zm11 0h-3v-5.342c0-1.392-.496-2.085-1.479-2.085-.779 0-1.273.388-1.521 1.165v6.262h-3s.04-9 0-10h2.368l.183 2h.062c.615-1 1.598-1.678 2.946-1.678 1.025 0 1.854.285 2.487 1.001.637.717.954 1.679.954 3.03v5.647z"></path><ellipse cx="6.5" cy="6.5" rx="1.55" ry="1.5"></ellipse></svg></div></a><a href="https://twitter.com/habberlabber"><div class="rounded-full p-2 bg-white dark:bg-gray-700 opacity-90 hover:bg-green-500 dark:hover:bg-green-500 hover:text-white shadow-sm hover:shadow-md transition-all duration-300"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path fill-rule="nonzero" d="M15.3 5.55a2.9 2.9 0 0 0-2.9 2.847l-.028 1.575a.6.6 0 0 1-.68.583l-1.561-.212c-2.054-.28-4.022-1.226-5.91-2.799-.598 3.31.57 5.603 3.383 7.372l1.747 1.098a.6.6 0 0 1 .034.993L7.793 18.17c.947.059 1.846.017 2.592-.131 4.718-.942 7.855-4.492 7.855-10.348 0-.478-1.012-2.141-2.94-2.141zm-4.9 2.81a4.9 4.9 0 0 1 8.385-3.355c.711-.005 1.316.175 2.669-.645-.335 1.64-.5 2.352-1.214 3.331 0 7.642-4.697 11.358-9.463 12.309-3.268.652-8.02-.419-9.382-1.841.694-.054 3.514-.357 5.144-1.55C5.16 15.7-.329 12.47 3.278 3.786c1.693 1.977 3.41 3.323 5.15 4.037 1.158.475 1.442.465 1.973.538z"></path></g></svg></div></a></div></div></div><div><div class="absolute top-6 left-6"><a class="flex items-center" href="/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M401.4 224h-214l83-79.4c11.9-12.5 11.9-32.7 0-45.2s-31.2-12.5-43.2 0L89 233.4c-6 5.8-9 13.7-9 22.4v.4c0 8.7 3 16.6 9 22.4l138.1 134c12 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2l-83-79.4h214c16.9 0 30.6-14.3 30.6-32 .1-18-13.6-32-30.5-32z"></path></svg> <b>Home</b></a></div><main class="space-y-4 pb-10"><h1 class="font-bold text-3xl text-gray-800">Building Web Components using Svelte</h1><p class="text-lg sm:leading-10 space-y-6 pb-6 prose dark:prose-dark"><div><p>So... I own a few 3D Printers, one of which is hooked up to a Raspberry PI Zero running <a href="https://github.com/OctoPrint/OctoPrint">Octoprint</a>.</p><p>I also run the open-source home automation platform <a href="https://www.home-assistant.io/">Home Assistant</a> on a Raspberry PI 4 to control and automate all the smart sensors and lighting etc. in my house.</p><p>In this post, I will go through how I created a custom UI element for Home Assistant that transform my 3D Printer dashboard as shown below!</p><table><thead><tr><th>Before</th><th>After</th></tr></thead><tbody><tr><td>coming soon</td><td><img src="https://user-images.githubusercontent.com/8472619/114276747-50ce5180-9a28-11eb-99d5-2f921a8aba67.png" alt="Octoprint card"/></td></tr></tbody></table><p>The code for my Home Assistant component is available on GitHub: <a href="https://github.com/kasperlaursen/octoprint-card">https://github.com/kasperlaursen/octoprint-card</a></p><p>And the code for this tutorial can also be found on GitHub: <a href="https://github.com/kasperlaursen/Building-Web-Components-using-Svelte">https://github.com/kasperlaursen/Building-Web-Components-using-Svelte</a></p><p>Let&#x27;s just get into it, no one wants to read a multi-page introduction 😀</p><h3>Project Setup</h3><p>To get started we need to generate a new Svelte project:</p><pre><code>npx degit sveltejs/template my-svelte-project
</code></pre><p>Go to the folder this creates:</p><pre><code>cd my-svelte-project
</code></pre><p>Let&#x27;s enable Typescript:</p><pre><code>node scripts/setupTypeScript.js
</code></pre><p>Install dependencies and run the local dev server:</p><pre><code>npm install
npm run dev
</code></pre><h3>Compiling to a Web Component</h3><p>Now let&#x27;s compile the code to a Web Component rather than a full website!<br/>
<!-- -->First, off we need to add the <code>svelte:options</code> tag to the top of our <code>App.svelte</code> component:</p><pre><code>&lt;svelte:options tag=&quot;my-web-component&quot; /&gt;
</code></pre><p>Then we need to let the svelte compiler know that we want to create web components.<br/>
<!-- -->Go to <code>rollup.config.js</code> and add the line <code>customElement: true,</code> as shown below:</p><pre><code class="language-diffs">svelte({
 preprocess: sveltePreprocess({ sourceMap: !production }),
 compilerOptions: {
 // enable run-time checks when not in production
 dev: !production,
 customElement: true,
 },
}),

</code></pre><p>While we are in the rollup file, let&#x27;s have svelte compile the CSS to the main bundle.js instead of a separate CSS file.<br/>
<!-- -->This is done by removing the following code from the rollup file;</p><pre><code>import css from &quot;rollup-plugin-css-only&quot;;

....

// we&#x27;ll extract any component CSS out into
// a separate file - better for performance
css({ output: &quot;bundle.css&quot; }),

</code></pre><p>At this point, Svelte is already creating a Web Component/Custom Element for us, but we are still rendering the component to the body element using svelte.</p><p>Go to the <code>main.ts</code> file and let&#x27;s stop svelte from rendering the component, by removing the following code:</p><pre><code>const app = new App({
 target: document.body,
 props: {
 name: &#x27;world&#x27;
 }
});

export default app;
</code></pre><p>If you do <strong>not</strong> plan to integrate your web component with Home Assistant, you can simply delete <code>main.ts</code> and make the following change in <code>rollup.config.js</code>:</p><pre><code>export default {
 // input: &quot;src/main.ts&quot;,
 input: &quot;src/App.svelte&quot;,
 output: {
</code></pre><p>Now your local dev server should show a blank page.<br/>
<!-- -->So let&#x27;s add the Web Component to the page.<br/>
<!-- -->Go to <code>public/index.html</code> and update the file to look like below:</p><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
 &lt;head&gt;
 &lt;meta charset=&quot;utf-8&quot; /&gt;
 &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot; /&gt;

 &lt;title&gt;Svelte app&lt;/title&gt;

 &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;/favicon.png&quot; /&gt;
 &lt;link rel=&quot;stylesheet&quot; href=&quot;/global.css&quot; /&gt;

 &lt;script defer src=&quot;/build/bundle.js&quot;&gt;&lt;/script&gt;
 &lt;/head&gt;

 &lt;body&gt;
 &lt;my-web-component /&gt;
 &lt;/body&gt;
&lt;/html&gt;

</code></pre><p>After Reloading your page you should now see <code>HELLO UNDEFINED!</code> on your page.<br/>
<!-- -->To pass the name prop to your component simply add the property to the custom element in your index.html file as below:</p><pre><code>&lt;my-web-component name=&quot;world&quot; /&gt;
</code></pre><p>So... This was the basics of generating a Web Component/Custom Element with Svelte. You can now add your bundle.js to any HTML page and the component will be available as an HTML custom element.</p><p>The next post will focus on integration with Home Assistant, and when available the link will be found {{Here}}!</p><p>The code for this project is available on GitHub: <a href="https://github.com/kasperlaursen/Building-Web-Components-using-Svelte">https://github.com/kasperlaursen/Building-Web-Components-using-Svelte</a><br/>
<!-- -->Where there can be a commit for each section (header) on these posts!</p></div></p><small class="text-base"> 🗓️ <!-- -->April 13, 2021</small><div class="space-x-3"><div class="inline-block rounded-full text-white duration-300 text-xs font-bold px-2 md:px-4 py-1 opacity-90 hover:opacity-100 capitalize bg-green-400 hover:bg-green-500">Svelte</div><div class="inline-block rounded-full text-white duration-300 text-xs font-bold px-2 md:px-4 py-1 opacity-90 hover:opacity-100 capitalize bg-yellow-400 hover:bg-yellow-500">Home Assistant</div><div class="inline-block rounded-full text-white duration-300 text-xs font-bold px-2 md:px-4 py-1 opacity-90 hover:opacity-100 capitalize bg-red-400 hover:bg-red-500">Web Components</div><div class="inline-block rounded-full text-white duration-300 text-xs font-bold px-2 md:px-4 py-1 opacity-90 hover:opacity-100 capitalize bg-yellow-400 hover:bg-yellow-500">3D Printing</div><div class="inline-block rounded-full text-white duration-300 text-xs font-bold px-2 md:px-4 py-1 opacity-90 hover:opacity-100 capitalize bg-red-400 hover:bg-red-500">Home Automation</div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"Building Web Components using Svelte","date":"April 13, 2021","excerpt":"This post is about how I build a Web Component to show my 3D Printer stats in my Home Automation dashboard.","tags":["Svelte","Home Assistant","Web Components","3D Printing","Home Automation"],"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"So... I own a few 3D Printers, one of which is hooked up to a Raspberry PI Zero running \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/OctoPrint/OctoPrint\"\n  }, \"Octoprint\"), \".\"), mdx(\"p\", null, \"I also run the open-source home automation platform \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.home-assistant.io/\"\n  }, \"Home Assistant\"), \" on a Raspberry PI 4 to control and automate all the smart sensors and lighting etc. in my house.\"), mdx(\"p\", null, \"In this post, I will go through how I created a custom UI element for Home Assistant that transform my 3D Printer dashboard as shown below!\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Before\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"After\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"coming soon\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"img\", {\n    parentName: \"td\",\n    \"src\": \"https://user-images.githubusercontent.com/8472619/114276747-50ce5180-9a28-11eb-99d5-2f921a8aba67.png\",\n    \"alt\": \"Octoprint card\"\n  }))))), mdx(\"p\", null, \"The code for my Home Assistant component is available on GitHub: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/kasperlaursen/octoprint-card\"\n  }, \"https://github.com/kasperlaursen/octoprint-card\")), mdx(\"p\", null, \"And the code for this tutorial can also be found on GitHub: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/kasperlaursen/Building-Web-Components-using-Svelte\"\n  }, \"https://github.com/kasperlaursen/Building-Web-Components-using-Svelte\")), mdx(\"p\", null, \"Let's just get into it, no one wants to read a multi-page introduction \\uD83D\\uDE00\"), mdx(\"h3\", null, \"Project Setup\"), mdx(\"p\", null, \"To get started we need to generate a new Svelte project:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"npx degit sveltejs/template my-svelte-project\\n\")), mdx(\"p\", null, \"Go to the folder this creates:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"cd my-svelte-project\\n\")), mdx(\"p\", null, \"Let's enable Typescript:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"node scripts/setupTypeScript.js\\n\")), mdx(\"p\", null, \"Install dependencies and run the local dev server:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"npm install\\nnpm run dev\\n\")), mdx(\"h3\", null, \"Compiling to a Web Component\"), mdx(\"p\", null, \"Now let's compile the code to a Web Component rather than a full website!\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"First, off we need to add the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"svelte:options\"), \" tag to the top of our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"App.svelte\"), \" component:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\u003csvelte:options tag=\\\"my-web-component\\\" /\u003e\\n\")), mdx(\"p\", null, \"Then we need to let the svelte compiler know that we want to create web components.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Go to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rollup.config.js\"), \" and add the line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"customElement: true,\"), \" as shown below:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-diffs\"\n  }, \"svelte({\\n preprocess: sveltePreprocess({ sourceMap: !production }),\\n compilerOptions: {\\n // enable run-time checks when not in production\\n dev: !production,\\n customElement: true,\\n },\\n}),\\n\\n\")), mdx(\"p\", null, \"While we are in the rollup file, let's have svelte compile the CSS to the main bundle.js instead of a separate CSS file.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"This is done by removing the following code from the rollup file;\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"import css from \\\"rollup-plugin-css-only\\\";\\n\\n....\\n\\n// we'll extract any component CSS out into\\n// a separate file - better for performance\\ncss({ output: \\\"bundle.css\\\" }),\\n\\n\")), mdx(\"p\", null, \"At this point, Svelte is already creating a Web Component/Custom Element for us, but we are still rendering the component to the body element using svelte.\"), mdx(\"p\", null, \"Go to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"main.ts\"), \" file and let's stop svelte from rendering the component, by removing the following code:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"const app = new App({\\n target: document.body,\\n props: {\\n name: 'world'\\n }\\n});\\n\\nexport default app;\\n\")), mdx(\"p\", null, \"If you do \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not\"), \" plan to integrate your web component with Home Assistant, you can simply delete \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"main.ts\"), \" and make the following change in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rollup.config.js\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"export default {\\n // input: \\\"src/main.ts\\\",\\n input: \\\"src/App.svelte\\\",\\n output: {\\n\")), mdx(\"p\", null, \"Now your local dev server should show a blank page.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"So let's add the Web Component to the page.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Go to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"public/index.html\"), \" and update the file to look like below:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\u003c!DOCTYPE html\u003e\\n\u003chtml lang=\\\"en\\\"\u003e\\n \u003chead\u003e\\n \u003cmeta charset=\\\"utf-8\\\" /\u003e\\n \u003cmeta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\" /\u003e\\n\\n \u003ctitle\u003eSvelte app\u003c/title\u003e\\n\\n \u003clink rel=\\\"icon\\\" type=\\\"image/png\\\" href=\\\"/favicon.png\\\" /\u003e\\n \u003clink rel=\\\"stylesheet\\\" href=\\\"/global.css\\\" /\u003e\\n\\n \u003cscript defer src=\\\"/build/bundle.js\\\"\u003e\u003c/script\u003e\\n \u003c/head\u003e\\n\\n \u003cbody\u003e\\n \u003cmy-web-component /\u003e\\n \u003c/body\u003e\\n\u003c/html\u003e\\n\\n\")), mdx(\"p\", null, \"After Reloading your page you should now see \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HELLO UNDEFINED!\"), \" on your page.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"To pass the name prop to your component simply add the property to the custom element in your index.html file as below:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\u003cmy-web-component name=\\\"world\\\" /\u003e\\n\")), mdx(\"p\", null, \"So... This was the basics of generating a Web Component/Custom Element with Svelte. You can now add your bundle.js to any HTML page and the component will be available as an HTML custom element.\"), mdx(\"p\", null, \"The next post will focus on integration with Home Assistant, and when available the link will be found {{Here}}!\"), mdx(\"p\", null, \"The code for this project is available on GitHub: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/kasperlaursen/Building-Web-Components-using-Svelte\"\n  }, \"https://github.com/kasperlaursen/Building-Web-Components-using-Svelte\"), mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Where there can be a commit for each section (header) on these posts!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eSo... I own a few 3D Printers, one of which is hooked up to a Raspberry PI Zero running \u003ca href=\"https://github.com/OctoPrint/OctoPrint\"\u003eOctoprint\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eI also run the open-source home automation platform \u003ca href=\"https://www.home-assistant.io/\"\u003eHome Assistant\u003c/a\u003e on a Raspberry PI 4 to control and automate all the smart sensors and lighting etc. in my house.\u003c/p\u003e\u003cp\u003eIn this post, I will go through how I created a custom UI element for Home Assistant that transform my 3D Printer dashboard as shown below!\u003c/p\u003e\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eBefore\u003c/th\u003e\u003cth\u003eAfter\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003ecoming soon\u003c/td\u003e\u003ctd\u003e\u003cimg src=\"https://user-images.githubusercontent.com/8472619/114276747-50ce5180-9a28-11eb-99d5-2f921a8aba67.png\" alt=\"Octoprint card\"/\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\u003cp\u003eThe code for my Home Assistant component is available on GitHub: \u003ca href=\"https://github.com/kasperlaursen/octoprint-card\"\u003ehttps://github.com/kasperlaursen/octoprint-card\u003c/a\u003e\u003c/p\u003e\u003cp\u003eAnd the code for this tutorial can also be found on GitHub: \u003ca href=\"https://github.com/kasperlaursen/Building-Web-Components-using-Svelte\"\u003ehttps://github.com/kasperlaursen/Building-Web-Components-using-Svelte\u003c/a\u003e\u003c/p\u003e\u003cp\u003eLet\u0026#x27;s just get into it, no one wants to read a multi-page introduction 😀\u003c/p\u003e\u003ch3\u003eProject Setup\u003c/h3\u003e\u003cp\u003eTo get started we need to generate a new Svelte project:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003enpx degit sveltejs/template my-svelte-project\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eGo to the folder this creates:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003ecd my-svelte-project\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLet\u0026#x27;s enable Typescript:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003enode scripts/setupTypeScript.js\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eInstall dependencies and run the local dev server:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003enpm install\nnpm run dev\n\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eCompiling to a Web Component\u003c/h3\u003e\u003cp\u003eNow let\u0026#x27;s compile the code to a Web Component rather than a full website!\u003cbr/\u003e\n\u003c!-- --\u003eFirst, off we need to add the \u003ccode\u003esvelte:options\u003c/code\u003e tag to the top of our \u003ccode\u003eApp.svelte\u003c/code\u003e component:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;svelte:options tag=\u0026quot;my-web-component\u0026quot; /\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen we need to let the svelte compiler know that we want to create web components.\u003cbr/\u003e\n\u003c!-- --\u003eGo to \u003ccode\u003erollup.config.js\u003c/code\u003e and add the line \u003ccode\u003ecustomElement: true,\u003c/code\u003e as shown below:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"language-diffs\"\u003esvelte({\n preprocess: sveltePreprocess({ sourceMap: !production }),\n compilerOptions: {\n // enable run-time checks when not in production\n dev: !production,\n customElement: true,\n },\n}),\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhile we are in the rollup file, let\u0026#x27;s have svelte compile the CSS to the main bundle.js instead of a separate CSS file.\u003cbr/\u003e\n\u003c!-- --\u003eThis is done by removing the following code from the rollup file;\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eimport css from \u0026quot;rollup-plugin-css-only\u0026quot;;\n\n....\n\n// we\u0026#x27;ll extract any component CSS out into\n// a separate file - better for performance\ncss({ output: \u0026quot;bundle.css\u0026quot; }),\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAt this point, Svelte is already creating a Web Component/Custom Element for us, but we are still rendering the component to the body element using svelte.\u003c/p\u003e\u003cp\u003eGo to the \u003ccode\u003emain.ts\u003c/code\u003e file and let\u0026#x27;s stop svelte from rendering the component, by removing the following code:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003econst app = new App({\n target: document.body,\n props: {\n name: \u0026#x27;world\u0026#x27;\n }\n});\n\nexport default app;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you do \u003cstrong\u003enot\u003c/strong\u003e plan to integrate your web component with Home Assistant, you can simply delete \u003ccode\u003emain.ts\u003c/code\u003e and make the following change in \u003ccode\u003erollup.config.js\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eexport default {\n // input: \u0026quot;src/main.ts\u0026quot;,\n input: \u0026quot;src/App.svelte\u0026quot;,\n output: {\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow your local dev server should show a blank page.\u003cbr/\u003e\n\u003c!-- --\u003eSo let\u0026#x27;s add the Web Component to the page.\u003cbr/\u003e\n\u003c!-- --\u003eGo to \u003ccode\u003epublic/index.html\u003c/code\u003e and update the file to look like below:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;!DOCTYPE html\u0026gt;\n\u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt;\n \u0026lt;head\u0026gt;\n \u0026lt;meta charset=\u0026quot;utf-8\u0026quot; /\u0026gt;\n \u0026lt;meta name=\u0026quot;viewport\u0026quot; content=\u0026quot;width=device-width,initial-scale=1\u0026quot; /\u0026gt;\n\n \u0026lt;title\u0026gt;Svelte app\u0026lt;/title\u0026gt;\n\n \u0026lt;link rel=\u0026quot;icon\u0026quot; type=\u0026quot;image/png\u0026quot; href=\u0026quot;/favicon.png\u0026quot; /\u0026gt;\n \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;/global.css\u0026quot; /\u0026gt;\n\n \u0026lt;script defer src=\u0026quot;/build/bundle.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n \u0026lt;/head\u0026gt;\n\n \u0026lt;body\u0026gt;\n \u0026lt;my-web-component /\u0026gt;\n \u0026lt;/body\u0026gt;\n\u0026lt;/html\u0026gt;\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAfter Reloading your page you should now see \u003ccode\u003eHELLO UNDEFINED!\u003c/code\u003e on your page.\u003cbr/\u003e\n\u003c!-- --\u003eTo pass the name prop to your component simply add the property to the custom element in your index.html file as below:\u003c/p\u003e\u003cpre\u003e\u003ccode\u003e\u0026lt;my-web-component name=\u0026quot;world\u0026quot; /\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo... This was the basics of generating a Web Component/Custom Element with Svelte. You can now add your bundle.js to any HTML page and the component will be available as an HTML custom element.\u003c/p\u003e\u003cp\u003eThe next post will focus on integration with Home Assistant, and when available the link will be found {{Here}}!\u003c/p\u003e\u003cp\u003eThe code for this project is available on GitHub: \u003ca href=\"https://github.com/kasperlaursen/Building-Web-Components-using-Svelte\"\u003ehttps://github.com/kasperlaursen/Building-Web-Components-using-Svelte\u003c/a\u003e\u003cbr/\u003e\n\u003c!-- --\u003eWhere there can be a commit for each section (header) on these posts!\u003c/p\u003e","scope":{}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"building-web-components-using-svelte"},"buildId":"rBoOj5IcAHYew2lz--wFc","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ff94e68042added27a93.js"></script><script src="/_next/static/chunks/main-a55f9a4b8ad6c211b679.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.0a9f20eff0752717cd72.js" async=""></script><script src="/_next/static/chunks/78e521c3.aa763ef5214bc6103da0.js" async=""></script><script src="/_next/static/chunks/de71a805.e58f4bc780d8bb7b43f3.js" async=""></script><script src="/_next/static/chunks/commons.128df154cba87bfd8f15.js" async=""></script><script src="/_next/static/chunks/pages/_app-568144d94c49e505bac9.js" async=""></script><script src="/_next/static/chunks/95b64a6e.f00b9c24f94837e27d6c.js" async=""></script><script src="/_next/static/chunks/2c3b9bffc7150b37a7b3810dfcf1c0b0fac2bd18.0133c3077496832caa33.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-74ce1f975269ad7f0e78.js" async=""></script><script src="/_next/static/rBoOj5IcAHYew2lz--wFc/_buildManifest.js" async=""></script><script src="/_next/static/rBoOj5IcAHYew2lz--wFc/_ssgManifest.js" async=""></script></body></html>